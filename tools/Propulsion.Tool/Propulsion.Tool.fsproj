<Project Sdk="Microsoft.NET.Sdk">

  <PropertyGroup>
    <TargetFramework>net6.0</TargetFramework>
    <OutputType>Exe</OutputType>

    <PackAsTool>true</PackAsTool>
    <ToolCommandName>propulsion</ToolCommandName>
    <!-- No reason to block running the tool on unsupported SDKs -->
    <!-- The target framework 'net6.0' is out of support and will not receive security updates in the future -->
    <NoWarn>NETSDK1138</NoWarn>
    <!-- No reason not to allow to run on newer SDKs -->
    <RollForward>Major</RollForward>

  </PropertyGroup>

  <ItemGroup>
    <Compile Include="Infrastructure.fs" />
    <Compile Include="Args.fs" />
    <Compile Include="Sync.fs" />
    <Compile Include="Program.fs" />
  </ItemGroup>

  <ItemGroup>
    <ProjectReference Include="..\..\src\Propulsion.CosmosStore\Propulsion.CosmosStore.fsproj" />
    <ProjectReference Include="..\..\src\Propulsion.DynamoStore\Propulsion.DynamoStore.fsproj" />
    <ProjectReference Include="..\..\src\Propulsion.MessageDb\Propulsion.MessageDb.fsproj" />
    <ProjectReference Include="..\..\src\Propulsion.MemoryStore\Propulsion.MemoryStore.fsproj" />
    <ProjectReference Include="..\..\src\Propulsion.Kafka\Propulsion.Kafka.fsproj" />
  </ItemGroup>

  <ItemGroup>
    <PackageReference Include="MinVer" Version="5.0.0" PrivateAssets="All" />

    <!-- The tool should use a relatively fresh Cosmos lib; Equinox.CosmosStore has a conservative dependency-->
    <PackageReference Include="Microsoft.Azure.Cosmos" Version="3.49.0" />

	<PackageReference Include="Argu" Version="6.2.2" />
    <!-- Required or there'll be an exception at runtime re missing support DLLs when using RBAC -->
    <PackageReference Include="AWSSDK.SecurityToken" Version="4.0.5.9" />
    <!-- Required for AWS SSO resolution -->
    <PackageReference Include="AWSSDK.SSO" Version="4.0.2.13" />
    <PackageReference Include="AWSSDK.SSOOIDC" Version="4.0.3.14" />
    <PackageReference Include="Serilog.Sinks.Async" Version="1.5.0" />
    <PackageReference Include="Serilog.Sinks.Console" Version="5.0.1" />
  </ItemGroup>

</Project>
